{% extends "base.html" %}

{% block title %}My Portfolio{% endblock %}

{% block content %}
<h1>My Portfolio</h1>

<div class="row">
	<div class="col-md-4">
		<div class="card">
			<div class="card-body">
				<h5 class="card-title">Portfolio Valuation</h5>
				<h3>${{ portfolio_value }}</h3>
			</div>
		</div>
	</div>

	<div class="col-md-4">
		<div class="card">
			<div class="card-body">
				<h5 class="card-title">Invested</h5>
				<h3>${{ portfolio_invested|floatformat:2 }}</h3>
			</div>
		</div>
	</div>

	<div class="col-md-4">
		<div class="card">
			<div class="card-body">
				<h5 class="card-title">Unrealised Gains</h5>
				<h3 class="{% if portfolio_unrealised_gains < 0 %}text-danger{% else %}text-success{% endif %}">
					${{ portfolio_unrealised_gains|floatformat:2 }}
				</h3>
			</div>
		</div>
	</div>
</div>

<h2 class="mt-4">Positions</h2>
<table class="table">
	<thead>
		<tr>
			<th>Ticker</th>
			<th>Asset</th>
			<th>Amount</th>
			<th>Price</th>
			<th>Valuation</th>
			<th>Unrealised Gains</th>
		</tr>
	</thead>
	<tbody>
		{% for position in positions %}
		<tr>
			<td>{{ position.asset.ticker }}</td>
			<td>{{ position.asset.name }}</td>
			<td class="num">{{ position.amount }}</td>
			<td class="num">${{ position.price }}</td>
			<td class="num">${{ position.valuation }}</td>
			<td class="num {% if position.unrealised_gains < 0 %}text-danger{% else %}text-success{% endif %}">
				${{ position.unrealised_gains|floatformat:2 }}
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endblock %}